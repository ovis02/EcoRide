{% extends 'base.html.twig' %} {% block title %}Connexion{% endblock %} {% block
content %}
<div class="login">
  <div class="container mt-5" style="max-width: 500px">
    <h2 class="text-center mb-4">Connexion</h2>

    {% if error %}
    <div class="alert alert-danger">
      Identifiants incorrects. Veuillez réessayer.
    </div>
    {% endif %}

    <form method="post">
      <div class="form-group mb-3">
        <label for="email">Email</label>
        <input
          type="text"
          name="email"
          id="email"
          class="form-control"
          value="{{ last_username }}"
          required
          autofocus
        />
      </div>

      <div class="form-group mb-4">
        <label for="password">Mot de passe</label>
        <input
          type="password"
          name="password"
          id="password"
          class="form-control"
          required
        />
      </div>

      <!-- Champ CSRF indispensable -->
      <input
        type="hidden"
        name="_csrf_token"
        value="{{ csrf_token('authenticate') }}"
      />

      <button type="submit" class="btn btn-primary w-100">Se connecter</button>

      <div class="text-center mt-3">
        <a href="{{ path('app_register') }}"
          >Pas encore de compte ? S’inscrire</a
        >
      </div>
    </form>

    <!-- Retour accueil -->
    <div class="text-center mt-3">
      <a href="{{ path('app_home') }}" class="btn btn-secondary"
        >Retour à l'accueil</a
      >
    </div>
  </div>
</div>
{% endblock %}
